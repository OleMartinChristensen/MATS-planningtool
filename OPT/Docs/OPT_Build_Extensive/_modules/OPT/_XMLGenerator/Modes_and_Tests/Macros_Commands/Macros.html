
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="python 3.7">
  <head>
    <meta charset="utf-8" />
    <title>OPT._XMLGenerator.Modes_and_Tests.Macros_Commands.Macros &#8212; Operational_Planning_Tool  documentation</title>
    <link rel="stylesheet" href="../../../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
   
  <link rel="stylesheet" href="../../../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for OPT._XMLGenerator.Modes_and_Tests.Macros_Commands.Macros</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;Contain Macro functions, that calls for Command functions located in the *Commands* module.</span>

<span class="sd">Macros consists of frequently used combinations of Commands. Each macro (except the CCD_macro) contain a </span>
<span class="sd">*TC_acfLimbPointingAltitudeOffset* CMD, which will stagger the next CMD by a number of seconds equal to </span>
<span class="sd">*Timeline_settings[&#39;pointing_stabilization&#39;]* when a new pointing altitude is set, or the previously set maximum TEXPMS when the pointing altitude is unchanged. </span>
<span class="sd">This is important as the images need time to finish their current exposure before changing the CCD settings.</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">importlib</span><span class="o">,</span> <span class="nn">logging</span>


<span class="kn">from</span> <span class="nn">OPT</span> <span class="k">import</span> <span class="n">_Library</span><span class="p">,</span> <span class="n">_Globals</span>

<span class="c1">#from .Commands import Commands</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">Commands</span>

<span class="n">OPT_Config_File</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">_Globals</span><span class="o">.</span><span class="n">Config_File</span><span class="p">)</span>
<span class="n">Logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">OPT_Config_File</span><span class="o">.</span><span class="n">Logger_name</span><span class="p">())</span>


<div class="viewcode-block" id="Operational_Limb_Pointing_macro"><a class="viewcode-back" href="../../../../../OPT._XMLGenerator.Modes_and_Tests.Macros_Commands.html#OPT._XMLGenerator.Modes_and_Tests.Macros_Commands.Macros.Operational_Limb_Pointing_macro">[docs]</a><span class="k">def</span> <span class="nf">Operational_Limb_Pointing_macro</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">CCD_settings</span><span class="p">,</span> <span class="n">PM_settings</span><span class="p">,</span> <span class="n">pointing_altitude</span><span class="p">,</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; Macro that corresponds to pointing towards a Limb altitude in Operational Mode.</span>
<span class="sd">    </span>
<span class="sd">    1. Set Payload to idle mode</span>
<span class="sd">    2. Point the satellite to *pointing_altitude*.</span>
<span class="sd">    3. Run PM Command with given settings.</span>
<span class="sd">    4. Run CCD Synchronize Command with calculated settings.</span>
<span class="sd">    5. Run CCD Commands with given settings.</span>
<span class="sd">    6. Set Payload to operational mode</span>
<span class="sd">    </span>
<span class="sd">    Arguments:</span>
<span class="sd">        root (lxml.etree._Element):  XML tree structure. Main container object for the ElementTree API.</span>
<span class="sd">        relativeTime (float): The relative starting time of the macro with regard to the start of the timeline [s]</span>
<span class="sd">        CCD_settings (:obj:`dict` of :obj:`dict` of int): Settings for the CCDs. Defined in the *Configuration File*.</span>
<span class="sd">        pointing_altitude (int): The altitude of the tangential point [m].</span>
<span class="sd">        Timeline_settings (dict): Dictionary containing the settings of the Timeline given in either the *Science_Mode_Timeline* or the *Configuration File*.</span>
<span class="sd">        comment (str): A comment for the macro. Will be printed in the genereated XML-file.</span>
<span class="sd">        </span>
<span class="sd">    Returns:</span>
<span class="sd">        relativeTime (float): Time in seconds equal to the input &quot;relativeTime&quot; with added delay from the scheduling of commands.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    
    <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span> <span class="o">+</span> <span class="s1">&#39;, Operational_Limb_Pointing_macro&#39;</span>
    
    <span class="n">CCDSEL</span><span class="p">,</span> <span class="n">NCCD</span><span class="p">,</span> <span class="n">TEXPIOFS</span><span class="p">,</span> <span class="n">TEXPIMS</span> <span class="o">=</span> <span class="n">_Library</span><span class="o">.</span><span class="n">SyncArgCalculator</span><span class="p">(</span><span class="n">CCD_settings</span><span class="p">,</span> <span class="n">Timeline_settings</span><span class="p">[</span><span class="s1">&#39;CCDSYNC_ExtraOffset&#39;</span><span class="p">],</span> <span class="n">Timeline_settings</span><span class="p">[</span><span class="s1">&#39;CCDSYNC_ExtraIntervalTime&#39;</span><span class="p">])</span>
    
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_pafMode</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">MODE</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="c1">#relativeTime_OperationalMode = relativeTime+Timeline_settings[&#39;pointing_stabilization&#39;]</span>
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_acfLimbPointingAltitudeOffset</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span>  <span class="n">Initial</span> <span class="o">=</span> <span class="n">pointing_altitude</span><span class="p">,</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">pointing_altitude</span><span class="p">,</span> 
                                                             <span class="n">Rate</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_pafPM</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">TEXPMS</span> <span class="o">=</span> <span class="n">PM_settings</span><span class="p">[</span><span class="s1">&#39;TEXPMS&#39;</span><span class="p">],</span> <span class="n">TEXPIMS</span> <span class="o">=</span> <span class="n">PM_settings</span><span class="p">[</span><span class="s1">&#39;TEXPIMS&#39;</span><span class="p">],</span> 
                                     <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_pafCCDSYNCHRONIZE</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">CCDSEL</span> <span class="o">=</span> <span class="n">CCDSEL</span><span class="p">,</span> <span class="n">NCCD</span> <span class="o">=</span> <span class="n">NCCD</span><span class="p">,</span> 
                                                 <span class="n">TEXPIOFS</span> <span class="o">=</span> <span class="n">TEXPIOFS</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span> <span class="p">)</span>
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">CCD_macro</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">CCD_settings</span> <span class="o">=</span> <span class="n">CCD_settings</span><span class="p">,</span> 
                             <span class="n">TEXPIMS</span> <span class="o">=</span> <span class="n">TEXPIMS</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_pafMode</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">MODE</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">relativeTime</span></div>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">def FullReadout_Operational_Limb_Pointing_macro(root, relativeTime, CCD_settings, pointing_altitude, TEXPIMS, Timeline_settings, comment):</span>
<span class="sd">    &#39;&#39;&#39; Macro that corresponds to pointing towards a Limb altitude in Operational Mode. </span>
<span class="sd">    </span>
<span class="sd">    Has an dedicated set Exposure Interval to prevent CRB-crashes when transferring very large images.</span>
<span class="sd">    </span>
<span class="sd">    1. Set Payload to idle mode</span>
<span class="sd">    2. Point the satellite to *pointing_altitude*.</span>
<span class="sd">    3. Start Photometers.</span>
<span class="sd">    4. Run CCD Synchronize Command with calculated settings.</span>
<span class="sd">    5. Run CCD Commands with given settings.</span>
<span class="sd">    6. Set Payload to operational mode</span>
<span class="sd">        </span>
<span class="sd">    Arguments:</span>
<span class="sd">        root (lxml.etree._Element):  XML tree structure. Main container object for the ElementTree API.</span>
<span class="sd">        relativeTime (float): The relative starting time of the macro with regard to the start of the timeline [s]</span>
<span class="sd">        CCD_settings (:obj:`dict` of :obj:`dict` of int): Settings for the CCDs.. Defined in the *Configuration File*.</span>
<span class="sd">        pointing_altitude (int): The altitude of the tangential point [m].</span>
<span class="sd">        TEXPIMS (int): Exposure Interval [ms]. Note! Must be set very large when handling large images, at least 60000ms.</span>
<span class="sd">        comment (str): A comment for the macro. Will be printed in the genereated XML-file.</span>
<span class="sd">        </span>
<span class="sd">    Returns:</span>
<span class="sd">        relativeTime (float): Time in seconds equal to the input &quot;relativeTime&quot; with added delay from the scheduling of commands.</span>
<span class="sd">        </span>
<span class="sd">    &#39;&#39;&#39;</span>
<span class="sd">    </span>
<span class="sd">    </span>
<span class="sd">    CCDSEL, NCCD, TEXPIOFS, TEXPIMS = _Library.SyncArgCalculator(CCD_settings, Timeline_settings[&#39;CCDSYNC_ExtraOffset&#39;], Timeline_settings[&#39;CCDSYNC_ExtraIntervalTime&#39;])</span>
<span class="sd">    </span>
<span class="sd">    relativeTime = Commands.TC_pafMode(root, relativeTime, MODE = 2, Timeline_settings = Timeline_settings, comment = comment)</span>
<span class="sd">    </span>
<span class="sd">    #relativeTime_OperationalMode = relativeTime+Timeline_settings[&#39;pointing_stabilization&#39;]</span>
<span class="sd">    relativeTime = Commands.TC_acfLimbPointingAltitudeOffset(root, relativeTime, Initial = pointing_altitude, Final = pointing_altitude, Rate = 0, Timeline_settings = Timeline_settings, comment = comment)</span>
<span class="sd">    </span>
<span class="sd">    relativeTime = Commands.TC_pafPM(root, relativeTime, Timeline_settings = Timeline_settings, comment = comment)</span>
<span class="sd">    </span>
<span class="sd">    relativeTime = Commands.TC_pafCCDSYNCHRONIZE(root, relativeTime, CCDSEL = CCDSEL, NCCD = NCCD, </span>
<span class="sd">                                                 TEXPIOFS = TEXPIOFS, Timeline_settings = Timeline_settings, comment = comment )</span>
<span class="sd">    </span>
<span class="sd">    relativeTime = CCD_macro(root, relativeTime, CCD_settings, TEXPIMS, Timeline_settings = Timeline_settings, comment = comment)</span>
<span class="sd">    </span>
<span class="sd">    relativeTime = Commands.TC_pafMode(root, relativeTime, MODE = 1, Timeline_settings = Timeline_settings, comment = comment)</span>
<span class="sd">    </span>
<span class="sd">    return relativeTime</span>
<span class="sd">&quot;&quot;&quot;</span>

<div class="viewcode-block" id="Operational_Sweep_macro"><a class="viewcode-back" href="../../../../../OPT._XMLGenerator.Modes_and_Tests.Macros_Commands.html#OPT._XMLGenerator.Modes_and_Tests.Macros_Commands.Macros.Operational_Sweep_macro">[docs]</a><span class="k">def</span> <span class="nf">Operational_Sweep_macro</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">CCD_settings</span><span class="p">,</span> <span class="n">PM_settings</span><span class="p">,</span> <span class="n">pointing_altitude_from</span><span class="p">,</span> <span class="n">pointing_altitude_to</span><span class="p">,</span> <span class="n">sweep_rate</span><span class="p">,</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Macro that corresponds to performing a sweep while in Operational Mode.</span>
<span class="sd">    </span>
<span class="sd">    1. Set Payload to idle mode</span>
<span class="sd">    2. Point the satellite to *pointing_altitude*.</span>
<span class="sd">    3. Run PM Command with given settings.</span>
<span class="sd">    4. Run CCD Synchronize Command with calculated settings.</span>
<span class="sd">    5. Run CCD Commands with given settings.</span>
<span class="sd">    6. Set Payload to operational mode.</span>
<span class="sd">    7. Start Sweep of satellite.</span>
<span class="sd">    </span>
<span class="sd">    Arguments:</span>
<span class="sd">        root (lxml.etree._Element):  XML tree structure. Main container object for the ElementTree API.</span>
<span class="sd">        relativeTime (float): The relative starting time of the macro with regard to the start of the timeline [s]</span>
<span class="sd">        CCD_settings (dict of dict of int): Settings for the CCDs.. Defined in the *Configuration File*.</span>
<span class="sd">        pointing_altitude_from (int): The altitude in meters from which to start the sweep </span>
<span class="sd">        pointing_altitude_from (int): The altitude in meters where the sweep will end</span>
<span class="sd">        sweep_rate (int): The rate of the sweep in m/s.</span>
<span class="sd">        Timeline_settings (dict): Dictionary containing the settings of the Timeline given in either the *Science_Mode_Timeline* or the *Configuration File*.</span>
<span class="sd">        comment (str): A comment for the macro. Will be printed in the genereated XML-file.</span>
<span class="sd">        </span>
<span class="sd">    Returns:</span>
<span class="sd">        relativeTime (float): Time in seconds equal to the input &quot;relativeTime&quot; with added delay from the scheduling of commands.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    
    <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span> <span class="o">+</span> <span class="s1">&#39;, Operational_Sweep_macro&#39;</span>
    
    <span class="n">CCDSEL</span><span class="p">,</span> <span class="n">NCCD</span><span class="p">,</span> <span class="n">TEXPIOFS</span><span class="p">,</span> <span class="n">TEXPIMS</span> <span class="o">=</span> <span class="n">_Library</span><span class="o">.</span><span class="n">SyncArgCalculator</span><span class="p">(</span><span class="n">CCD_settings</span><span class="p">,</span> <span class="n">Timeline_settings</span><span class="p">[</span><span class="s1">&#39;CCDSYNC_ExtraOffset&#39;</span><span class="p">],</span> <span class="n">Timeline_settings</span><span class="p">[</span><span class="s1">&#39;CCDSYNC_ExtraIntervalTime&#39;</span><span class="p">])</span>
    
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_pafMode</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">MODE</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="c1">#relativeTime_OperationalMode = relativeTime+Timeline_settings[&#39;pointing_stabilization&#39;]</span>
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_acfLimbPointingAltitudeOffset</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">Initial</span> <span class="o">=</span> <span class="n">pointing_altitude_from</span><span class="p">,</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">pointing_altitude_from</span><span class="p">,</span> 
                                                             <span class="n">Rate</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_pafPM</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">TEXPMS</span> <span class="o">=</span> <span class="n">PM_settings</span><span class="p">[</span><span class="s1">&#39;TEXPMS&#39;</span><span class="p">],</span> <span class="n">TEXPIMS</span> <span class="o">=</span> <span class="n">PM_settings</span><span class="p">[</span><span class="s1">&#39;TEXPIMS&#39;</span><span class="p">],</span> 
                                     <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_pafCCDSYNCHRONIZE</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">CCDSEL</span> <span class="o">=</span> <span class="n">CCDSEL</span><span class="p">,</span> <span class="n">NCCD</span> <span class="o">=</span> <span class="n">NCCD</span><span class="p">,</span> 
                                                 <span class="n">TEXPIOFS</span> <span class="o">=</span> <span class="n">TEXPIOFS</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span> <span class="p">)</span>
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">CCD_macro</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">CCD_settings</span><span class="p">,</span> <span class="n">TEXPIMS</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_pafMode</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">MODE</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_acfLimbPointingAltitudeOffset</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">Initial</span> <span class="o">=</span> <span class="n">pointing_altitude_from</span><span class="p">,</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">pointing_altitude_to</span><span class="p">,</span> 
                                                             <span class="n">Rate</span> <span class="o">=</span> <span class="n">sweep_rate</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">relativeTime</span></div>


<div class="viewcode-block" id="Snapshot_Inertial_macro"><a class="viewcode-back" href="../../../../../OPT._XMLGenerator.Modes_and_Tests.Macros_Commands.html#OPT._XMLGenerator.Modes_and_Tests.Macros_Commands.Macros.Snapshot_Inertial_macro">[docs]</a><span class="k">def</span> <span class="nf">Snapshot_Inertial_macro</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">CCD_settings</span><span class="p">,</span> <span class="n">FreezeTime</span><span class="p">,</span> <span class="n">FreezeDuration</span><span class="p">,</span> <span class="n">pointing_altitude</span><span class="p">,</span> 
                  <span class="n">StandardPointingAltitude</span><span class="p">,</span> <span class="n">SnapshotSpacing</span><span class="p">,</span> <span class="n">Snapshot_relativeTime</span><span class="p">,</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; Macro that corresponds to pointing towards an Inertial direction and take a Snapshot with all the CCDs (except Nadir).</span>
<span class="sd">    </span>
<span class="sd">    The order of the snapshots taken is determined by the CCDs TEXPMS in increasing order. This to prevent simultaneous readout.</span>
<span class="sd">    </span>
<span class="sd">    1. Set Payload to idle mode</span>
<span class="sd">    2. Point the satellite to *pointing_altitude*.</span>
<span class="sd">    3. Run CCD Commands with given settings.</span>
<span class="sd">    4. Run ArgFreezeStart Command with *FreezeTime*.</span>
<span class="sd">    5. Run ArgFreezeDuration Command with *FreezeDuration*.</span>
<span class="sd">    6. Take a Snapshot with each CCD (except Nadir and CCDs with TEXPMS=0) starting at *Snapshot_relativeTime* with a spacing of *SnapshotSpacing*.</span>
<span class="sd">    7. Point the satellite to *StandardPointingAltitude*.</span>
<span class="sd">    </span>
<span class="sd">    Arguments:</span>
<span class="sd">        root (lxml.etree._Element):  XML tree structure. Main container object for the ElementTree API.</span>
<span class="sd">        relativeTime (float): The relative starting time of the macro with regard to the start of the timeline [s]</span>
<span class="sd">        CCD_settings (dict of dict of int): Settings for the CCDs.. Defined in the *Configuration File*.</span>
<span class="sd">        FreezeTime (float): Start time of attitude freeze command in on-board time [s].</span>
<span class="sd">        FreezeDuration (int): Duration of freeze [s].</span>
<span class="sd">        pointing_altitude (int): The altitude of the tangential point [m].</span>
<span class="sd">        StandardPointingAltitude (int): The altitude of the LP [m].</span>
<span class="sd">        SnapshotSpacing (int): The time in seconds inbetween snapshots of individual CCDs.</span>
<span class="sd">        Snapshot_relativeTime (float): The relativeTime (time from start of timeline) at which the first Snapshot is taken.</span>
<span class="sd">        Timeline_settings (dict): Dictionary containing the settings of the Timeline given in either the *Science_Mode_Timeline* or the *Configuration File*.</span>
<span class="sd">        comment (str): A comment for the macro. Will be printed in the genereated XML-file.</span>
<span class="sd">        </span>
<span class="sd">    Returns:</span>
<span class="sd">        relativeTime (float): Time in seconds equal to the input &quot;relativeTime&quot; with added delay from the scheduling of commands.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    
    <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span> <span class="o">+</span> <span class="s1">&#39;, Snapshot_Inertial_macro&#39;</span>
    
    <span class="n">Disregarded</span><span class="p">,</span> <span class="n">Disregarded</span><span class="p">,</span> <span class="n">Disregarded</span><span class="p">,</span> <span class="n">TEXPIMS</span> <span class="o">=</span> <span class="n">_Library</span><span class="o">.</span><span class="n">SyncArgCalculator</span><span class="p">(</span><span class="n">CCD_settings</span><span class="p">,</span> <span class="n">Timeline_settings</span><span class="p">[</span><span class="s1">&#39;CCDSYNC_ExtraOffset&#39;</span><span class="p">],</span> <span class="n">Timeline_settings</span><span class="p">[</span><span class="s1">&#39;CCDSYNC_ExtraIntervalTime&#39;</span><span class="p">])</span>
    <span class="n">CCDSELs</span> <span class="o">=</span> <span class="n">_Library</span><span class="o">.</span><span class="n">OrderingOfCCDSnapshots</span><span class="p">(</span><span class="n">CCD_settings</span><span class="p">)</span>
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_pafMode</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">MODE</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_acfLimbPointingAltitudeOffset</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">Initial</span> <span class="o">=</span> <span class="n">pointing_altitude</span><span class="p">,</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">pointing_altitude</span><span class="p">,</span> <span class="n">Rate</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">CCD_macro</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">CCD_settings</span><span class="p">,</span> <span class="n">TEXPIMS</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_affArgFreezeStart</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">StartTime</span> <span class="o">=</span> <span class="n">FreezeTime</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_affArgFreezeDuration</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">FreezeDuration</span> <span class="o">=</span> <span class="n">FreezeDuration</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">CCDSEL</span> <span class="ow">in</span> <span class="n">CCDSELs</span><span class="p">:</span>
        <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_pafCCDSnapshot</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">Snapshot_relativeTime</span><span class="p">,</span> <span class="n">CCDSEL</span> <span class="o">=</span> <span class="n">CCDSEL</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
        <span class="n">Snapshot_relativeTime</span> <span class="o">+=</span> <span class="n">SnapshotSpacing</span>
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_acfLimbPointingAltitudeOffset</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">Initial</span> <span class="o">=</span> <span class="n">StandardPointingAltitude</span><span class="p">,</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">StandardPointingAltitude</span><span class="p">,</span> <span class="n">Rate</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    <span class="c1">#relativeTime = Commands.TC_pafMode(root, relativeTime, MODE = 1, Timeline_settings = Timeline_settings, comment = comment)</span>
    
    <span class="k">return</span> <span class="n">relativeTime</span></div>


<div class="viewcode-block" id="Snapshot_Limb_Pointing_macro"><a class="viewcode-back" href="../../../../../OPT._XMLGenerator.Modes_and_Tests.Macros_Commands.html#OPT._XMLGenerator.Modes_and_Tests.Macros_Commands.Macros.Snapshot_Limb_Pointing_macro">[docs]</a><span class="k">def</span> <span class="nf">Snapshot_Limb_Pointing_macro</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">CCD_settings</span><span class="p">,</span> <span class="n">pointing_altitude</span><span class="p">,</span> <span class="n">SnapshotSpacing</span><span class="p">,</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; Macro that corresponds to pointing towards a Limb altitude and taking a Snapshot with each CCD (except Nadir).</span>
<span class="sd">    </span>
<span class="sd">    The order of the snapshots taken is determined by the CCDs TEXPMS in increasing order. This to prevent simultaneous readout.</span>
<span class="sd">    </span>
<span class="sd">    1. Set Payload to idle mode</span>
<span class="sd">    2. Point the satellite to *pointing_altitude*.</span>
<span class="sd">    3. Run CCD Commands with given settings.</span>
<span class="sd">    4. Take a Snapshot with each CCD (except Nadir and CCDs with TEXPMS=0) with a spacing of *SnapshotSpacing*.</span>
<span class="sd">    </span>
<span class="sd">    Arguments:</span>
<span class="sd">        root (lxml.etree._Element):  XML tree structure. Main container object for the ElementTree API.</span>
<span class="sd">        relativeTime (float): The relative starting time of the macro with regard to the start of the timeline [s]</span>
<span class="sd">        CCD_settings (dict of dict of int): Settings for the CCDs.. Defined in the *Configuration File*.</span>
<span class="sd">        pointing_altitude (int): The altitude of the tangential point [m].</span>
<span class="sd">        SnapshotSpacing (int): The time in seconds inbetween snapshots of individual CCDs.</span>
<span class="sd">        Timeline_settings (dict): Dictionary containing the settings of the Timeline given in either the *Science_Mode_Timeline* or the *Configuration File*.</span>
<span class="sd">        comment (str): A comment for the macro. Will be printed in the genereated XML-file.</span>
<span class="sd">        </span>
<span class="sd">    Returns:</span>
<span class="sd">        relativeTime (float): Time in seconds equal to the input &quot;relativeTime&quot; with added delay from the scheduling of commands.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    
    <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span> <span class="o">+</span> <span class="s1">&#39;, Snapshot_Limb_Pointing_macro&#39;</span>
    
    <span class="n">Disregarded</span><span class="p">,</span> <span class="n">Disregarded</span><span class="p">,</span> <span class="n">Disregarded</span><span class="p">,</span> <span class="n">TEXPIMS</span> <span class="o">=</span> <span class="n">_Library</span><span class="o">.</span><span class="n">SyncArgCalculator</span><span class="p">(</span><span class="n">CCD_settings</span><span class="p">,</span> <span class="n">Timeline_settings</span><span class="p">[</span><span class="s1">&#39;CCDSYNC_ExtraOffset&#39;</span><span class="p">],</span> <span class="n">Timeline_settings</span><span class="p">[</span><span class="s1">&#39;CCDSYNC_ExtraIntervalTime&#39;</span><span class="p">])</span>
    <span class="n">CCDSELs</span> <span class="o">=</span> <span class="n">_Library</span><span class="o">.</span><span class="n">OrderingOfCCDSnapshots</span><span class="p">(</span><span class="n">CCD_settings</span><span class="p">)</span>
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_pafMode</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">MODE</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="c1">#relativeTime_SnapShot = relativeTime+Timeline_settings[&#39;pointing_stabilization&#39;]</span>
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_acfLimbPointingAltitudeOffset</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">Initial</span> <span class="o">=</span> <span class="n">pointing_altitude</span><span class="p">,</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">pointing_altitude</span><span class="p">,</span> <span class="n">Rate</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">CCD_macro</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">CCD_settings</span><span class="p">,</span> <span class="n">TEXPIMS</span><span class="o">=</span><span class="n">TEXPIMS</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">CCDSEL</span> <span class="ow">in</span> <span class="n">CCDSELs</span><span class="p">:</span>
        <span class="n">Commands</span><span class="o">.</span><span class="n">TC_pafCCDSnapshot</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">CCDSEL</span> <span class="o">=</span> <span class="n">CCDSEL</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
        <span class="n">relativeTime</span> <span class="o">+=</span> <span class="n">SnapshotSpacing</span>
        
    <span class="c1">#relativeTime = Commands.TC_pafMode(root, relativeTime, MODE = 1, Timeline_settings = Timeline_settings, comment = comment)</span>
    
    <span class="k">return</span> <span class="n">relativeTime</span></div>



<div class="viewcode-block" id="NadirSnapshot_Limb_Pointing_macro"><a class="viewcode-back" href="../../../../../OPT._XMLGenerator.Modes_and_Tests.Macros_Commands.html#OPT._XMLGenerator.Modes_and_Tests.Macros_Commands.Macros.NadirSnapshot_Limb_Pointing_macro">[docs]</a><span class="k">def</span> <span class="nf">NadirSnapshot_Limb_Pointing_macro</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">CCD_settings</span><span class="p">,</span> <span class="n">pointing_altitude</span><span class="p">,</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; Macro that corresponds to pointing towards a Limb altitude and taking a Snapshot with Nadir.</span>
<span class="sd">    </span>
<span class="sd">    1. Set Payload to idle mode</span>
<span class="sd">    2. Point the satellite to *pointing_altitude*.</span>
<span class="sd">    3. Run CCD Commands with given settings.</span>
<span class="sd">    4. Take a Snapshot with Nadir.</span>
<span class="sd">    </span>
<span class="sd">    Arguments:</span>
<span class="sd">        root (lxml.etree._Element):  XML tree structure. Main container object for the ElementTree API.</span>
<span class="sd">        relativeTime (float): The relative starting time of the macro with regard to the start of the timeline [s]</span>
<span class="sd">        CCD_settings (dict of dict of int): Settings for the CCDs.. Defined in the *Configuration File*.</span>
<span class="sd">        pointing_altitude (int): The altitude of the tangential point [m].</span>
<span class="sd">        SnapshotSpacing (int): The time in seconds inbetween snapshots of individual CCDs.</span>
<span class="sd">        Timeline_settings (dict): Dictionary containing the settings of the Timeline given in either the *Science_Mode_Timeline* or the *Configuration File*.</span>
<span class="sd">        comment (str): A comment for the macro. Will be printed in the genereated XML-file.</span>
<span class="sd">        </span>
<span class="sd">    Returns:</span>
<span class="sd">        relativeTime (float): Time in seconds equal to the input &quot;relativeTime&quot; with added delay from the scheduling of commands.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    
    <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span> <span class="o">+</span> <span class="s1">&#39;, NadirSnapshot_Limb_Pointing_macro&#39;</span>
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_pafMode</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">MODE</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="c1">#relativeTime_SnapShot = relativeTime+Timeline_settings[&#39;pointing_stabilization&#39;]</span>
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_acfLimbPointingAltitudeOffset</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">Initial</span> <span class="o">=</span> <span class="n">pointing_altitude</span><span class="p">,</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">pointing_altitude</span><span class="p">,</span> <span class="n">Rate</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="n">CCDSEL_64</span> <span class="o">=</span> <span class="n">CCD_settings</span><span class="p">[</span><span class="mi">64</span><span class="p">]</span>
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_pafCCDMain</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">CCDSEL</span> <span class="o">=</span> <span class="mi">64</span><span class="p">,</span> <span class="n">PWR</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;PWR&#39;</span><span class="p">],</span> <span class="n">WDW</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;WDW&#39;</span><span class="p">],</span> <span class="n">JPEGQ</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;JPEGQ&#39;</span><span class="p">],</span> <span class="n">SYNC</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;SYNC&#39;</span><span class="p">],</span> 
                                          <span class="n">TEXPIMS</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;TEXPIMS&#39;</span><span class="p">],</span> <span class="n">TEXPMS</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;TEXPMS&#39;</span><span class="p">],</span> <span class="n">GAIN</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;GAIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NFLUSH</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;NFLUSH&#39;</span><span class="p">],</span> <span class="n">NRSKIP</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;NRSKIP&#39;</span><span class="p">],</span> <span class="n">NRBIN</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;NRBIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NROW</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;NROW&#39;</span><span class="p">],</span> <span class="n">NCSKIP</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;NCSKIP&#39;</span><span class="p">],</span> <span class="n">NCBIN</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;NCBIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NCOL</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;NCOL&#39;</span><span class="p">],</span> <span class="n">NCBINFPGA</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;NCBINFPGA&#39;</span><span class="p">],</span> <span class="n">SIGMODE</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;SIGMODE&#39;</span><span class="p">],</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_pafCCDSnapshot</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">CCDSEL</span> <span class="o">=</span> <span class="mi">64</span><span class="p">,</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
        
    <span class="c1">#relativeTime = Commands.TC_pafMode(root, relativeTime, MODE = 1, Timeline_settings = Timeline_settings, comment = comment)</span>
    
    <span class="k">return</span> <span class="n">relativeTime</span></div>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">def TurnONCCDs_macro(root, relativeTime, Timeline_settings, comment = &#39;&#39;):</span>
<span class="sd">    &#39;&#39;&#39; Macro that corresponds to the TurnONCCDs_macro.</span>
<span class="sd">    </span>
<span class="sd">    Switches ON all CCDs.</span>
<span class="sd">    </span>
<span class="sd">    Arguments:</span>
<span class="sd">        root (lxml.etree._Element):  XML tree structure. Main container object for the ElementTree API.</span>
<span class="sd">        relativeTime (float): The relative starting time of the macro with regard to the start of the timeline [s]</span>
<span class="sd">        Timeline_settings (dict): Dictionary containing the settings of the Timeline given in either the *Science_Mode_Timeline* or the *Configuration File*.</span>
<span class="sd">        comment (str): A comment for the macro. Will be printed in the genereated XML-file.</span>

<span class="sd">    Returns:</span>
<span class="sd">        relativeTime (float): Time in seconds equal to the input &quot;relativeTime&quot; with added delay from the scheduling of commands.</span>
<span class="sd">    &#39;&#39;&#39;</span>
<span class="sd">    </span>
<span class="sd">    comment = comment + &#39;, TurnONCCDs_macro&#39;</span>
<span class="sd">    </span>
<span class="sd">    relativeTime = Commands.TC_pafMode(root, relativeTime, MODE = 2, Timeline_settings = Timeline_settings, comment = comment)</span>
<span class="sd">    </span>
<span class="sd">    relativeTime = Commands.TC_pafCCDMain(root, relativeTime, CCDSEL = 127, PWR = 1, TEXPIMS = 6000, TEXPMS = 0, NRSKIP = 0, NRBIN = 1, NROW = 1, </span>
<span class="sd">                                          NCBIN = 1, NCOL=1, WDW = 7, JPEGQ = 110, SYNC = 0, NCBINFPGA = 0, SIGMODE = 1, GAIN = 0, </span>
<span class="sd">                                          NFLUSH = 1023, NCSKIP = 0, Timeline_settings = Timeline_settings, comment = comment)</span>
<span class="sd">    </span>
<span class="sd">    return relativeTime</span>

<span class="sd">&quot;&quot;&quot;</span>

<div class="viewcode-block" id="CCD_macro"><a class="viewcode-back" href="../../../../../OPT._XMLGenerator.Modes_and_Tests.Macros_Commands.html#OPT._XMLGenerator.Modes_and_Tests.Macros_Commands.Macros.CCD_macro">[docs]</a><span class="k">def</span> <span class="nf">CCD_macro</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">CCD_settings</span><span class="p">,</span> <span class="n">TEXPIMS</span><span class="p">,</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Macro that corresponds to configurating the settings of the CCDs</span>
<span class="sd">    </span>
<span class="sd">    Used when the Synchronization CMD is used to synchronize all the CCDs (except nadir), and when Snapshots are utilized where TEXPIMS is irrelevant.</span>
<span class="sd">    TEXPIMS for all the CCDs except nadir is set to the same value to allow Synchronization.</span>
<span class="sd">    </span>
<span class="sd">    Arguments:</span>
<span class="sd">        root (lxml.etree._Element):  XML tree structure. Main container object for the ElementTree API.</span>
<span class="sd">        relativeTime (float): The relative starting time of the macro with regard to the start of the timeline [s]</span>
<span class="sd">        CCD_settings (:obj:`dict` of int): A dict containing Settings for the CCDs. Defined in the *Configuration File*.</span>
<span class="sd">        TEXPIMS (int): ExposureIntervalTime for the CCDs (except nadir) in ms.</span>
<span class="sd">        Timeline_settings (dict): Dictionary containing the settings of the Timeline given in either the *Science_Mode_Timeline* or the *Configuration File*.</span>
<span class="sd">        comment (str): A comment for the macro. Will be printed in the genereated XML-file.</span>
<span class="sd">    </span>
<span class="sd">    Returns:</span>
<span class="sd">        relativeTime (float): Time in seconds equal to the input &quot;relativeTime&quot; with added delay from the scheduling of commands.</span>
<span class="sd">        </span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;TEXPIMS: &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">TEXPIMS</span><span class="p">))</span>
    
    <span class="n">CCDSEL_16</span> <span class="o">=</span> <span class="n">CCD_settings</span><span class="p">[</span><span class="mi">16</span><span class="p">]</span>
    <span class="n">CCDSEL_32</span> <span class="o">=</span> <span class="n">CCD_settings</span><span class="p">[</span><span class="mi">32</span><span class="p">]</span>
    <span class="n">CCDSEL_1</span> <span class="o">=</span> <span class="n">CCD_settings</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">CCDSEL_8</span> <span class="o">=</span> <span class="n">CCD_settings</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span>
    <span class="n">CCDSEL_2</span> <span class="o">=</span> <span class="n">CCD_settings</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">CCDSEL_4</span> <span class="o">=</span> <span class="n">CCD_settings</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
    <span class="n">CCDSEL_64</span> <span class="o">=</span> <span class="n">CCD_settings</span><span class="p">[</span><span class="mi">64</span><span class="p">]</span>
    
    <span class="n">ListOfTEXPMS</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">CCD_settings</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">ListOfTEXPMS</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">CCD_settings</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;TEXPMS&#39;</span><span class="p">]</span> <span class="p">)</span>
        
    <span class="n">_Globals</span><span class="o">.</span><span class="n">LargestSetTEXPMS</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">ListOfTEXPMS</span><span class="p">)</span>
    
    <span class="c1">#T_readout, T_delay, T_Extra = _Library.calculate_time_per_row(NCOL = CCDSEL_64[&#39;NCOL&#39;], NCBIN = CCDSEL_64[&#39;NCBIN&#39;], NCBINFPGA = CCDSEL_64[&#39;NCBINFPGA&#39;], </span>
    <span class="c1">#                                                     NRSKIP = CCDSEL_64[&#39;NRSKIP&#39;], NROW = CCDSEL_64[&#39;NROW&#39;], NRBIN = CCDSEL_64[&#39;NRBIN&#39;], NFLUSH = CCDSEL_64[&#39;NFLUSH&#39;])</span>
    
    <span class="c1">#ReadOutTime_64 = T_readout + T_delay + T_Extra</span>
    
    <span class="c1">#TEXPIMS_64 = int(ReadOutTime_64) + +CCDSEL_64[&#39;TEXPMS&#39;] + Timeline_settings[&#39;CCDSYNC_ExtraIntervalTime&#39;]</span>
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_pafCCDMain</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">CCDSEL</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span> <span class="n">PWR</span> <span class="o">=</span> <span class="n">CCDSEL_16</span><span class="p">[</span><span class="s1">&#39;PWR&#39;</span><span class="p">],</span> <span class="n">WDW</span> <span class="o">=</span> <span class="n">CCDSEL_16</span><span class="p">[</span><span class="s1">&#39;WDW&#39;</span><span class="p">],</span> <span class="n">JPEGQ</span> <span class="o">=</span> <span class="n">CCDSEL_16</span><span class="p">[</span><span class="s1">&#39;JPEGQ&#39;</span><span class="p">],</span> <span class="n">SYNC</span> <span class="o">=</span> <span class="n">CCDSEL_16</span><span class="p">[</span><span class="s1">&#39;SYNC&#39;</span><span class="p">],</span>   
                                          <span class="n">TEXPIMS</span> <span class="o">=</span> <span class="n">TEXPIMS</span><span class="p">,</span> <span class="n">TEXPMS</span> <span class="o">=</span> <span class="n">CCDSEL_16</span><span class="p">[</span><span class="s1">&#39;TEXPMS&#39;</span><span class="p">],</span> <span class="n">GAIN</span> <span class="o">=</span> <span class="n">CCDSEL_16</span><span class="p">[</span><span class="s1">&#39;GAIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NFLUSH</span> <span class="o">=</span> <span class="n">CCDSEL_16</span><span class="p">[</span><span class="s1">&#39;NFLUSH&#39;</span><span class="p">],</span> <span class="n">NRSKIP</span> <span class="o">=</span> <span class="n">CCDSEL_16</span><span class="p">[</span><span class="s1">&#39;NRSKIP&#39;</span><span class="p">],</span> <span class="n">NRBIN</span> <span class="o">=</span> <span class="n">CCDSEL_16</span><span class="p">[</span><span class="s1">&#39;NRBIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NROW</span> <span class="o">=</span> <span class="n">CCDSEL_16</span><span class="p">[</span><span class="s1">&#39;NROW&#39;</span><span class="p">],</span> <span class="n">NCSKIP</span> <span class="o">=</span> <span class="n">CCDSEL_16</span><span class="p">[</span><span class="s1">&#39;NCSKIP&#39;</span><span class="p">],</span> <span class="n">NCBIN</span> <span class="o">=</span> <span class="n">CCDSEL_16</span><span class="p">[</span><span class="s1">&#39;NCBIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NCOL</span> <span class="o">=</span> <span class="n">CCDSEL_16</span><span class="p">[</span><span class="s1">&#39;NCOL&#39;</span><span class="p">],</span> <span class="n">NCBINFPGA</span> <span class="o">=</span> <span class="n">CCDSEL_16</span><span class="p">[</span><span class="s1">&#39;NCBINFPGA&#39;</span><span class="p">],</span> <span class="n">SIGMODE</span> <span class="o">=</span> <span class="n">CCDSEL_16</span><span class="p">[</span><span class="s1">&#39;SIGMODE&#39;</span><span class="p">],</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_pafCCDMain</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">CCDSEL</span> <span class="o">=</span> <span class="mi">32</span><span class="p">,</span> <span class="n">PWR</span> <span class="o">=</span> <span class="n">CCDSEL_32</span><span class="p">[</span><span class="s1">&#39;PWR&#39;</span><span class="p">],</span> <span class="n">WDW</span> <span class="o">=</span> <span class="n">CCDSEL_32</span><span class="p">[</span><span class="s1">&#39;WDW&#39;</span><span class="p">],</span> <span class="n">JPEGQ</span> <span class="o">=</span> <span class="n">CCDSEL_32</span><span class="p">[</span><span class="s1">&#39;JPEGQ&#39;</span><span class="p">],</span> <span class="n">SYNC</span> <span class="o">=</span> <span class="n">CCDSEL_32</span><span class="p">[</span><span class="s1">&#39;SYNC&#39;</span><span class="p">],</span> 
                                          <span class="n">TEXPIMS</span> <span class="o">=</span> <span class="n">TEXPIMS</span><span class="p">,</span> <span class="n">TEXPMS</span> <span class="o">=</span> <span class="n">CCDSEL_32</span><span class="p">[</span><span class="s1">&#39;TEXPMS&#39;</span><span class="p">],</span> <span class="n">GAIN</span> <span class="o">=</span> <span class="n">CCDSEL_32</span><span class="p">[</span><span class="s1">&#39;GAIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NFLUSH</span> <span class="o">=</span> <span class="n">CCDSEL_32</span><span class="p">[</span><span class="s1">&#39;NFLUSH&#39;</span><span class="p">],</span> <span class="n">NRSKIP</span> <span class="o">=</span> <span class="n">CCDSEL_32</span><span class="p">[</span><span class="s1">&#39;NRSKIP&#39;</span><span class="p">],</span> <span class="n">NRBIN</span> <span class="o">=</span> <span class="n">CCDSEL_32</span><span class="p">[</span><span class="s1">&#39;NRBIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NROW</span> <span class="o">=</span> <span class="n">CCDSEL_32</span><span class="p">[</span><span class="s1">&#39;NROW&#39;</span><span class="p">],</span> <span class="n">NCSKIP</span> <span class="o">=</span> <span class="n">CCDSEL_32</span><span class="p">[</span><span class="s1">&#39;NCSKIP&#39;</span><span class="p">],</span> <span class="n">NCBIN</span> <span class="o">=</span> <span class="n">CCDSEL_32</span><span class="p">[</span><span class="s1">&#39;NCBIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NCOL</span> <span class="o">=</span> <span class="n">CCDSEL_32</span><span class="p">[</span><span class="s1">&#39;NCOL&#39;</span><span class="p">],</span> <span class="n">NCBINFPGA</span> <span class="o">=</span> <span class="n">CCDSEL_32</span><span class="p">[</span><span class="s1">&#39;NCBINFPGA&#39;</span><span class="p">],</span> <span class="n">SIGMODE</span> <span class="o">=</span> <span class="n">CCDSEL_32</span><span class="p">[</span><span class="s1">&#39;SIGMODE&#39;</span><span class="p">],</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_pafCCDMain</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">CCDSEL</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">PWR</span> <span class="o">=</span> <span class="n">CCDSEL_1</span><span class="p">[</span><span class="s1">&#39;PWR&#39;</span><span class="p">],</span> <span class="n">WDW</span> <span class="o">=</span> <span class="n">CCDSEL_1</span><span class="p">[</span><span class="s1">&#39;WDW&#39;</span><span class="p">],</span> <span class="n">JPEGQ</span> <span class="o">=</span> <span class="n">CCDSEL_1</span><span class="p">[</span><span class="s1">&#39;JPEGQ&#39;</span><span class="p">],</span> <span class="n">SYNC</span> <span class="o">=</span> <span class="n">CCDSEL_1</span><span class="p">[</span><span class="s1">&#39;SYNC&#39;</span><span class="p">],</span> 
                                          <span class="n">TEXPIMS</span> <span class="o">=</span> <span class="n">TEXPIMS</span><span class="p">,</span> <span class="n">TEXPMS</span> <span class="o">=</span> <span class="n">CCDSEL_1</span><span class="p">[</span><span class="s1">&#39;TEXPMS&#39;</span><span class="p">],</span> <span class="n">GAIN</span> <span class="o">=</span> <span class="n">CCDSEL_1</span><span class="p">[</span><span class="s1">&#39;GAIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NFLUSH</span> <span class="o">=</span> <span class="n">CCDSEL_1</span><span class="p">[</span><span class="s1">&#39;NFLUSH&#39;</span><span class="p">],</span> <span class="n">NRSKIP</span> <span class="o">=</span> <span class="n">CCDSEL_1</span><span class="p">[</span><span class="s1">&#39;NRSKIP&#39;</span><span class="p">],</span> <span class="n">NRBIN</span> <span class="o">=</span> <span class="n">CCDSEL_1</span><span class="p">[</span><span class="s1">&#39;NRBIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NROW</span> <span class="o">=</span> <span class="n">CCDSEL_1</span><span class="p">[</span><span class="s1">&#39;NROW&#39;</span><span class="p">],</span> <span class="n">NCSKIP</span> <span class="o">=</span> <span class="n">CCDSEL_1</span><span class="p">[</span><span class="s1">&#39;NCSKIP&#39;</span><span class="p">],</span> <span class="n">NCBIN</span> <span class="o">=</span> <span class="n">CCDSEL_1</span><span class="p">[</span><span class="s1">&#39;NCBIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NCOL</span> <span class="o">=</span> <span class="n">CCDSEL_1</span><span class="p">[</span><span class="s1">&#39;NCOL&#39;</span><span class="p">],</span> <span class="n">NCBINFPGA</span> <span class="o">=</span> <span class="n">CCDSEL_1</span><span class="p">[</span><span class="s1">&#39;NCBINFPGA&#39;</span><span class="p">],</span> <span class="n">SIGMODE</span> <span class="o">=</span> <span class="n">CCDSEL_1</span><span class="p">[</span><span class="s1">&#39;SIGMODE&#39;</span><span class="p">],</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_pafCCDMain</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">CCDSEL</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span> <span class="n">PWR</span> <span class="o">=</span> <span class="n">CCDSEL_8</span><span class="p">[</span><span class="s1">&#39;PWR&#39;</span><span class="p">],</span> <span class="n">WDW</span> <span class="o">=</span> <span class="n">CCDSEL_8</span><span class="p">[</span><span class="s1">&#39;WDW&#39;</span><span class="p">],</span> <span class="n">JPEGQ</span> <span class="o">=</span> <span class="n">CCDSEL_8</span><span class="p">[</span><span class="s1">&#39;JPEGQ&#39;</span><span class="p">],</span> <span class="n">SYNC</span> <span class="o">=</span> <span class="n">CCDSEL_8</span><span class="p">[</span><span class="s1">&#39;SYNC&#39;</span><span class="p">],</span> 
                                          <span class="n">TEXPIMS</span> <span class="o">=</span> <span class="n">TEXPIMS</span><span class="p">,</span> <span class="n">TEXPMS</span> <span class="o">=</span> <span class="n">CCDSEL_8</span><span class="p">[</span><span class="s1">&#39;TEXPMS&#39;</span><span class="p">],</span> <span class="n">GAIN</span> <span class="o">=</span> <span class="n">CCDSEL_8</span><span class="p">[</span><span class="s1">&#39;GAIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NFLUSH</span> <span class="o">=</span> <span class="n">CCDSEL_8</span><span class="p">[</span><span class="s1">&#39;NFLUSH&#39;</span><span class="p">],</span> <span class="n">NRSKIP</span> <span class="o">=</span> <span class="n">CCDSEL_8</span><span class="p">[</span><span class="s1">&#39;NRSKIP&#39;</span><span class="p">],</span> <span class="n">NRBIN</span> <span class="o">=</span> <span class="n">CCDSEL_8</span><span class="p">[</span><span class="s1">&#39;NRBIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NROW</span> <span class="o">=</span> <span class="n">CCDSEL_8</span><span class="p">[</span><span class="s1">&#39;NROW&#39;</span><span class="p">],</span> <span class="n">NCSKIP</span> <span class="o">=</span> <span class="n">CCDSEL_8</span><span class="p">[</span><span class="s1">&#39;NCSKIP&#39;</span><span class="p">],</span> <span class="n">NCBIN</span> <span class="o">=</span> <span class="n">CCDSEL_8</span><span class="p">[</span><span class="s1">&#39;NCBIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NCOL</span> <span class="o">=</span> <span class="n">CCDSEL_8</span><span class="p">[</span><span class="s1">&#39;NCOL&#39;</span><span class="p">],</span> <span class="n">NCBINFPGA</span> <span class="o">=</span> <span class="n">CCDSEL_8</span><span class="p">[</span><span class="s1">&#39;NCBINFPGA&#39;</span><span class="p">],</span> <span class="n">SIGMODE</span> <span class="o">=</span> <span class="n">CCDSEL_8</span><span class="p">[</span><span class="s1">&#39;SIGMODE&#39;</span><span class="p">],</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_pafCCDMain</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">CCDSEL</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">PWR</span> <span class="o">=</span> <span class="n">CCDSEL_2</span><span class="p">[</span><span class="s1">&#39;PWR&#39;</span><span class="p">],</span> <span class="n">WDW</span> <span class="o">=</span> <span class="n">CCDSEL_2</span><span class="p">[</span><span class="s1">&#39;WDW&#39;</span><span class="p">],</span> <span class="n">JPEGQ</span> <span class="o">=</span> <span class="n">CCDSEL_2</span><span class="p">[</span><span class="s1">&#39;JPEGQ&#39;</span><span class="p">],</span> <span class="n">SYNC</span> <span class="o">=</span> <span class="n">CCDSEL_2</span><span class="p">[</span><span class="s1">&#39;SYNC&#39;</span><span class="p">],</span> 
                                          <span class="n">TEXPIMS</span> <span class="o">=</span> <span class="n">TEXPIMS</span><span class="p">,</span> <span class="n">TEXPMS</span> <span class="o">=</span> <span class="n">CCDSEL_2</span><span class="p">[</span><span class="s1">&#39;TEXPMS&#39;</span><span class="p">],</span> <span class="n">GAIN</span> <span class="o">=</span> <span class="n">CCDSEL_2</span><span class="p">[</span><span class="s1">&#39;GAIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NFLUSH</span> <span class="o">=</span> <span class="n">CCDSEL_2</span><span class="p">[</span><span class="s1">&#39;NFLUSH&#39;</span><span class="p">],</span> <span class="n">NRSKIP</span> <span class="o">=</span> <span class="n">CCDSEL_2</span><span class="p">[</span><span class="s1">&#39;NRSKIP&#39;</span><span class="p">],</span> <span class="n">NRBIN</span> <span class="o">=</span> <span class="n">CCDSEL_2</span><span class="p">[</span><span class="s1">&#39;NRBIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NROW</span> <span class="o">=</span> <span class="n">CCDSEL_2</span><span class="p">[</span><span class="s1">&#39;NROW&#39;</span><span class="p">],</span> <span class="n">NCSKIP</span> <span class="o">=</span> <span class="n">CCDSEL_2</span><span class="p">[</span><span class="s1">&#39;NCSKIP&#39;</span><span class="p">],</span> <span class="n">NCBIN</span> <span class="o">=</span> <span class="n">CCDSEL_2</span><span class="p">[</span><span class="s1">&#39;NCBIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NCOL</span> <span class="o">=</span> <span class="n">CCDSEL_2</span><span class="p">[</span><span class="s1">&#39;NCOL&#39;</span><span class="p">],</span> <span class="n">NCBINFPGA</span> <span class="o">=</span> <span class="n">CCDSEL_2</span><span class="p">[</span><span class="s1">&#39;NCBINFPGA&#39;</span><span class="p">],</span> <span class="n">SIGMODE</span> <span class="o">=</span> <span class="n">CCDSEL_2</span><span class="p">[</span><span class="s1">&#39;SIGMODE&#39;</span><span class="p">],</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_pafCCDMain</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">CCDSEL</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">PWR</span> <span class="o">=</span> <span class="n">CCDSEL_4</span><span class="p">[</span><span class="s1">&#39;PWR&#39;</span><span class="p">],</span> <span class="n">WDW</span> <span class="o">=</span> <span class="n">CCDSEL_4</span><span class="p">[</span><span class="s1">&#39;WDW&#39;</span><span class="p">],</span> <span class="n">JPEGQ</span> <span class="o">=</span> <span class="n">CCDSEL_4</span><span class="p">[</span><span class="s1">&#39;JPEGQ&#39;</span><span class="p">],</span> <span class="n">SYNC</span> <span class="o">=</span> <span class="n">CCDSEL_4</span><span class="p">[</span><span class="s1">&#39;SYNC&#39;</span><span class="p">],</span> 
                                          <span class="n">TEXPIMS</span> <span class="o">=</span> <span class="n">TEXPIMS</span><span class="p">,</span> <span class="n">TEXPMS</span> <span class="o">=</span> <span class="n">CCDSEL_4</span><span class="p">[</span><span class="s1">&#39;TEXPMS&#39;</span><span class="p">],</span> <span class="n">GAIN</span> <span class="o">=</span> <span class="n">CCDSEL_4</span><span class="p">[</span><span class="s1">&#39;GAIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NFLUSH</span> <span class="o">=</span> <span class="n">CCDSEL_4</span><span class="p">[</span><span class="s1">&#39;NFLUSH&#39;</span><span class="p">],</span> <span class="n">NRSKIP</span> <span class="o">=</span> <span class="n">CCDSEL_4</span><span class="p">[</span><span class="s1">&#39;NRSKIP&#39;</span><span class="p">],</span> <span class="n">NRBIN</span> <span class="o">=</span> <span class="n">CCDSEL_4</span><span class="p">[</span><span class="s1">&#39;NRBIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NROW</span> <span class="o">=</span> <span class="n">CCDSEL_4</span><span class="p">[</span><span class="s1">&#39;NROW&#39;</span><span class="p">],</span> <span class="n">NCSKIP</span> <span class="o">=</span> <span class="n">CCDSEL_4</span><span class="p">[</span><span class="s1">&#39;NCSKIP&#39;</span><span class="p">],</span> <span class="n">NCBIN</span> <span class="o">=</span> <span class="n">CCDSEL_4</span><span class="p">[</span><span class="s1">&#39;NCBIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NCOL</span> <span class="o">=</span> <span class="n">CCDSEL_4</span><span class="p">[</span><span class="s1">&#39;NCOL&#39;</span><span class="p">],</span> <span class="n">NCBINFPGA</span> <span class="o">=</span> <span class="n">CCDSEL_4</span><span class="p">[</span><span class="s1">&#39;NCBINFPGA&#39;</span><span class="p">],</span> <span class="n">SIGMODE</span> <span class="o">=</span> <span class="n">CCDSEL_4</span><span class="p">[</span><span class="s1">&#39;SIGMODE&#39;</span><span class="p">],</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    
    <span class="n">relativeTime</span> <span class="o">=</span> <span class="n">Commands</span><span class="o">.</span><span class="n">TC_pafCCDMain</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relativeTime</span><span class="p">,</span> <span class="n">CCDSEL</span> <span class="o">=</span> <span class="mi">64</span><span class="p">,</span> <span class="n">PWR</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;PWR&#39;</span><span class="p">],</span> <span class="n">WDW</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;WDW&#39;</span><span class="p">],</span> <span class="n">JPEGQ</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;JPEGQ&#39;</span><span class="p">],</span> <span class="n">SYNC</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;SYNC&#39;</span><span class="p">],</span> 
                                          <span class="n">TEXPIMS</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;TEXPIMS&#39;</span><span class="p">],</span> <span class="n">TEXPMS</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;TEXPMS&#39;</span><span class="p">],</span> <span class="n">GAIN</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;GAIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NFLUSH</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;NFLUSH&#39;</span><span class="p">],</span> <span class="n">NRSKIP</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;NRSKIP&#39;</span><span class="p">],</span> <span class="n">NRBIN</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;NRBIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NROW</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;NROW&#39;</span><span class="p">],</span> <span class="n">NCSKIP</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;NCSKIP&#39;</span><span class="p">],</span> <span class="n">NCBIN</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;NCBIN&#39;</span><span class="p">],</span> 
                                          <span class="n">NCOL</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;NCOL&#39;</span><span class="p">],</span> <span class="n">NCBINFPGA</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;NCBINFPGA&#39;</span><span class="p">],</span> <span class="n">SIGMODE</span> <span class="o">=</span> <span class="n">CCDSEL_64</span><span class="p">[</span><span class="s1">&#39;SIGMODE&#39;</span><span class="p">],</span> <span class="n">Timeline_settings</span> <span class="o">=</span> <span class="n">Timeline_settings</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">relativeTime</span></div>




<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">def Mode_User_Specified_macro(root, relativeTime, Timeline_settings, comment = &#39;&#39;):</span>
<span class="sd">    &quot;This is a template for a new macro. Exchange &#39;_User_Specified&#39; for the name of the new macro&quot;</span>
<span class="sd">    </span>
<span class="sd">    </span>
<span class="sd">    return relativeTime</span>
<span class="sd">    </span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../../index.html">Operational_Planning_Tool</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../OPT.html">OPT package</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../../index.html">Documentation overview</a><ul>
  <li><a href="../../../../index.html">Module code</a><ul>
  <li><a href="../../../../OPT.html">OPT</a><ul>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, David Sknberg.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>